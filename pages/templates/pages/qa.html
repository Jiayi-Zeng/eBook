{% load wagtailcore_tags static%}

{% if page.multipleChoice.count > 0 %}
<h5>选择题</h5>
<div class="accordion accordion-flush" id="multipleChoice">
    {% for item in page.multipleChoice.all %}
    <div class="accordion-item">
        <h2 class="accordion-header" id="flush-heading-{{ forloop.counter }}">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#flush-collapse-{{ forloop.counter }}" aria-expanded="false"
                aria-controls="flush-collapse-{{ forloop.counter }}">
                Question #{{ forloop.counter }}
            </button>
        </h2>

        <div id="flush-collapse-{{ forloop.counter }}" class="accordion-collapse collapse"
            aria-labelledby="flush-heading-{{ forloop.counter }}">
            <div class="accordion-body" style="text-align: left;">
                {{ item.question|richtext }}

                <form>
                    {% csrf_token %}
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="option-a">
                        <label class="form-check-label" for="flexRadioDefault1">
                            A {{ item.option_a }}
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="option-b" checked>
                        <label class="form-check-label" for="flexRadioDefault2">
                            B {{ item.option_b }}
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="option-c" checked>
                        <label class="form-check-label" for="flexRadioDefault2">
                            C {{ item.option_c }}
                        </label>
                    </div>
                    <div class="form-check"> 
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="option-d" checked>
                        <label class="form-check-label" for="flexRadioDefault2">
                            D {{ item.option_d }}
                        </label>
                    </div>
                    <button onclick="submitAnswer" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% if page.clozeQuestion.count > 0 %}
<h5>填空题</h5>
<div class="accordion accordion-flush" id="clozeQuestion">
    {% for item in page.clozeQuestion.all %}
    <div class="accordion-item">
        <h2 class="accordion-header" id="flush-cloze-heading-{{ forloop.counter }}">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#flush-cloze-collapse-{{ forloop.counter }}" aria-expanded="false"
                aria-controls="flush-cloze-collapse-{{ forloop.counter }}">
                Question #{{ forloop.counter }}
            </button>
        </h2>
        <div id="flush-cloze-collapse-{{ forloop.counter }}" class="accordion-collapse collapse"
            aria-labelledby="flush-cloze-heading-{{ forloop.counter }}">
            <div class="accordion-body" style="text-align: left;">
                {{ item.question|richtext }}

                <form>
                    <div class="mb-3">
                        <label for="answer-input" class="form-label">答案</label>
                        <input type="text" class="form-control" id="answer-input{{ forloop.counter }}">
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% if page.clozeQuestion.count == 0 and page.multipleChoice.count == 0 %}
<h5>There are no questions in this page.</h5>
{% endif %}

{% if page.clozeQuestion == null and page.multipleChoice == null %}
<h5>There are no questions in this page.</h5>
{% endif %}


{% block extra_js %}
{% endblock %}
