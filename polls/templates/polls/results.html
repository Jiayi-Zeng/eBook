{% extends "wagtailadmin/base.html" %}
{% block titletag %}Result{% endblock %}

{% block extra_css %}
{{ block.super }}
<style>
    table.month {
        margin: 20px;
    }

    table.month td,
    table.month th {
        padding: 5px;
    }
</style>
{% endblock %}

{% block content %}
{% include "wagtailadmin/shared/header.html" with title="Result" icon="success" %}

<div class="nice-padding">
    {{ block.super }} {# This will render the default content #}
    <h1>{{ question.question_text }}</h1>

    <ul>
        {% for choice in question.choices.all %}
        <li>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>
        {% endfor %}
    </ul>

    <h2>Submissions</h2>
    <!-- <form method="get">
        <input type="text" name="search" placeholder="Search..." value="{{ request.GET.search }}">
        <button type="submit">Search</button>
    </form>

    <select onchange="location = this.value;">
        <option value="?">All Choices</option>
        {% for choice in question.choices.all %}
            <option value="?choices={{ choice.id }}" {% if request.GET.question == choice.id|stringformat:"s" %}selected{% endif %}>
                {{ choice.choice_text }}
            </option>
        {% endfor %}
    </select> -->


    <table class="listing listing--inline-actions">
        <thead>
            <tr>
                <th>
                    <a href="?ordering=user" title="Sort by 'User' in ascending order." class="icon icon-arrow-down-after teal">
                        User
                    </a>
                </th>
                <th>
                    <a href="?ordering=choice" title="Sort by 'Choice' in ascending order." class="icon icon-arrow-down-after teal">
                        choice
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            {% for userchoice in user_choices %}
            <tr>
                <td>{{ userchoice.user }}</td>
                <td>{{ userchoice.choice.choice_text }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="pagination">
        <span class="step-links">
            {% if user_choices.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ user_choices.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ user_choices.number }} of {{ user_choices.paginator.num_pages }}.
            </span>

            {% if user_choices.has_next %}
            <a href="?page={{ user_choices.next_page_number }}">next</a>
            <a href="?page={{ user_choices.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>

</div>
<!-- <iframe src="/admin/snippets/polls/userchoice/" height="100%" width="100%"></iframe> -->
{% endblock %}