{% extends "base_home.html" %}

{% load wagtailcore_tags static %}

{% block content %}

<div class="tab-example-result mt-5 ml-10 mr-10" style="min-height: 55vh;">
    {% if answer_objects %}
    {% for answered_object in answer_objects %}
    <div id="accordion-{{ forloop.counter }}" class="accordion accordion-stacked">
        <!-- Accordion card 1 -->
        <div class="card">
            {% if answered_object.correct == True %}
            <div class="card-header py-4 color" id="heading-{{ forloop.counter }}-{{ forloop.counter }}"
                data-toggle="collapse" role="button" data-target="#collapse-{{ forloop.counter }}-{{ forloop.counter }}"
                aria-expanded="false" aria-controls="collapse-{{ forloop.counter }}-{{ forloop.counter }}">
                <h6 class="mb-0"><i data-feather="file" class="mr-3"></i>
                    <span class="badge badge-success mr-4">Success</span>
                    Question #{{ forloop.counter }} {{ answered_object.publish.question.question_text }}
                </h6>
            </div>
            {% else %}
            <div class="card-header py-4" id="heading-{{ forloop.counter }}-{{ forloop.counter }}"
                data-toggle="collapse" role="button" data-target="#collapse-{{ forloop.counter }}-{{ forloop.counter }}"
                aria-expanded="false" aria-controls="collapse-{{ forloop.counter }}-{{ forloop.counter }}">
                <h6 class="mb-0"><i data-feather="file" class="mr-3"></i>
                    <span class="badge badge-danger mr-4">&nbsp;&nbsp;Error&nbsp;&nbsp;</span>
                    Question #{{ forloop.counter }} {{ answered_object.publish.question.question_text }}
                </h6>
            </div>
            {% endif %}
            <div id="collapse-{{ forloop.counter }}-{{ forloop.counter }}" class="collapse"
                aria-labelledby="heading-{{ forloop.counter }}-{{ forloop.counter }}"
                data-parent="#accordion-{{ forloop.counter }}">
                <div class="card-body">
                    <div class="container position-relative zindex-100">
                        <div class="row justify-content-center">
                            <div class="col-lg-6 text-center">
                                
                                <h3>Question #{{ forloop.counter }} {{ answered_object.publish.question.question_text }} </p>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div class="mb-3">
                                <form>
                                    {% csrf_token %}
                                    {% for choice in answered_object.publish.question.choices.all %}
                                    <div class="custom-control custom-radio">
                                        <input type="radio" name="choice" id="choice-{{ forloop.counter }}"
                                            value="{{ choice.id }}" class="custom-control-input" disabled>
                                        <label class="custom-control-label" for="choice-{{ forloop.counter }}">{{ choice.choice_text }}</label>
                                    </div>
                                    {% endfor %}
                                </form>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <p>
                                你的答案是
                                {% if answered_object.correct == True %}
                                <span class="badge badge-soft-success">{{ answered_object.choice.choice_text }}</span>. 
                                {% else %}
                                <span class="badge badge-soft-danger">{{ answered_object.choice.choice_text }}</span>. 
                                正确答案是
                                <span class="badge badge-soft-success">{{ answered_object.publish.question.correct_choice }}</span>. 
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    <!-- No Question Available -->
{% else %}
<section class="slice py-7 ">
    <div class="container">
        <div class="row row-grid align-items-center">
            <div class="col-12 col-md-5 col-lg-6 order-md-2 text-center">
                <!-- Image -->
                <figure class="w-100">
                    <img alt="Image placeholder" src="{% static 'img/svg/illustrations/illustration-2.svg' %}"
                        class="img-fluid mw-md-120">
                </figure>
            </div>
            <div class="col-12 col-md-7 col-lg-6 order-md-1 pr-md-5">
                <!-- Heading -->
                <h1 class="display-4 text-center text-md-left mb-3">
                    {% if error_message %}
                    <p>{{ error_message }}</p>
                    {% else %}
                    <strong class="text-primary">暂无</strong>历史记录。
                    {% endif %}
                </h1>
                <!-- Buttons -->
                <div class="text-center text-md-left mt-5">
                    <a href="/intro_to_cs/" class="btn btn-primary btn-icon" target="_blank">
                        <span class="btn-inner--text">Return</span>
                    </a>
                    <!-- <a href="https://webpixels.io/illustrations"
                        class="btn btn-neutral btn-icon d-none d-lg-inline-block" target="_blank">Chat with Bot
                    </a> -->
                </div>
            </div>
        </div>
    </div>
</section>

{% endif %}
</div>
{% endblock %}